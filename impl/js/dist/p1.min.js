(function(){function h(){this.__strings__=[]}valueParser=function(){c.white();var a=c.next;switch(a.ch){case "{":return c.object();case "[":return c.array();case '"':return c.string();case "-":return c.number();default:return"0"<=a.ch&&"9">=a.ch?c.number():c.word()}};var g=function(a,b){b&&console.log(b);var d=c.next;throw{name:"SyntaxError",message:a,at:d.at,text:d.text};},c=[];c.string=function(){var a,b,d="",e,f=c.next;if('"'===f.ch)for(;f.val();){if('"'===f.ch)return f.val(),d;if("\\"===f.ch)if(f.val(),
"u"===f.ch){for(b=e=0;4>b;b+=1){a=parseInt(f.val(),16);if(!isFinite(a))break;e=16*e+a}d+=String.fromCharCode(e)}else if("string"===typeof f.escapeCharacters[ch])d+=f.escapeCharacters[ch];else break;else d+=f.ch}g("Bad string","stringParser")};c.word=function(){var a=c.next;switch(a.ch){case "t":return a.val("t"),a.val("r"),a.val("u"),a.val("e"),!0;case "f":return a.val("f"),a.val("a"),a.val("l"),a.val("s"),a.val("e"),!1;case "n":return a.val("n"),a.val("u"),a.val("l"),a.val("l"),null}c.error("Unexpected '"+
a.ch+"'","wordParser")};c.number=function(){var a;a="";var b=c.next;"-"===b.ch&&(a="-",b.val("-"));for(;"0"<=b.ch&&"9">=b.ch;)a+=b.ch,b.val();if("."===b.ch)for(a+=".";b.val()&&"0"<=b.ch&&"9">=b.ch;)a+=b.ch;if("e"===b.ch||"E"===b.ch){a+=b.ch;b.val();if("-"===b.ch||"+"===b.ch)a+=b.ch,b.val();for(;"0"<=b.ch&&"9">=b.ch;)a+=b.ch,b.val()}a=+a;if(isFinite(a))return a;g("Bad number")};c.object=function(){var a,b={},d=c.next,e=c.white,f=c.value;if("{"===d.ch){d.val("{");e();if("}"===d.ch)return d.val("}"),
b;for(;d.ch;){a=d.key();e();d.val(":");Object.hasOwnProperty.call(b,a)&&g("Duplicate key '"+a+"'","objectParser");var h=f();b[a]=h;e();if("}"===d.ch)return d.val("}"),b;d.val(",");e()}}g("Bad object","objectParser")};c.array=function(){var a=c.next,b=c.white,d=c.value,e=[];if("["===a.ch){a.val("[");b();if("]"===a.ch)return a.val("]"),e;for(;a.ch;){var f=d();e.push(f);b();if("]"===a.ch)return a.val("]"),a.subObjectMappings.pop(),e;a.val(",");b()}}g("Bad array","arrayParser")};c.value=valueParser;c.white=
function(){for(var a=c.next;a.ch&&" ">=a.ch;)a.val()};c.next={at:0,ch:" ",escapeCharacters:{'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},text:"",atObject:0,objectMapping:[],subObjectMappings:[],init:function(){this.atObject=this.at=0;this.ch=" ";this.text-0;this.objectMapping.splice(0,this.objectMapping.length);this.subObjectMappings.splice(0,this.subObjectMappings.length)},val:function(a){a&&a!==this.ch&&g("Expected '"+a+"' instead of '"+this.ch+"'","next");this.ch=this.text.charAt(this.at);
this.at+=1;return this.ch},key:function(){var a,b="";if(0<this.subObjectMappings.length){var c=this.subObjectMappings[this.subObjectMappings.length-1];a=c.items[c.counter++];c.counter===c.items.length&&("array"===c.parentType?c.counter=0:this.subObjectMappings.pop())}else a=this.objectMapping[this.atObject++];for(var e in a)b=e;if(Array.isArray(a[b])||"object"===typeof a[b])c={items:a[b].items,counter:0,type:a[b].type},c.parentType=a[b].parentType||null,this.subObjectMappings.push(c);return b}};c.error=
g;c.init=function(a,b){c.next.init();c.next.objectMapping=a;c.next.text=b};c.parse=function(){return c.value()};h.prototype.append=function(a){this.__strings__.push(a);return this};h.prototype.toString=function(){return this.__strings__.join("")}});
